function imba97_jpinput(){if(typeof $==='function'){if(imba97_K==undefined){var imba97_jq=$;var imba97_VERSION=1.1;var imba97_F;var imba97_W;var imba97_T=1;var imba97_S=[0,0,0];var imba97_N=0;var imba97_TEXT;var imba97_UN;var imba97_BTN;var imba97_UT='';var imba97_ON=true;var imba97_K=new Array();imba97_K[75]=[1,'k'];imba97_K[83]=[1,'s'];imba97_K[84]=[1,'t'];imba97_K[78]=[1,'n'];imba97_K[72]=[1,'h'];imba97_K[77]=[1,'m'];imba97_K[89]=[1,'y'];imba97_K[82]=[1,'r'];imba97_K[87]=[1,'w'];imba97_K[70]=[1,'f'];imba97_K[74]=[1,'j'];imba97_K[76]=[1,'l'];imba97_K[67]=[1,'c'];imba97_K[81]=[1,'q'];imba97_K[84][89]=[1,'s'];imba97_K[67][72]=[1,'h'];imba97_K[83][72]=[1,'h'];imba97_K[81][87]=[1,'w'];imba97_K[75][87]=[1,'w'];imba97_K[65]=[0,'あ','ア'];imba97_K[73]=[0,'い','イ'];imba97_K[85]=[0,'う','ウ'];imba97_K[69]=[0,'え','エ'];imba97_K[79]=[0,'お','オ'];imba97_K[75][65]=[0,'か','カ'];imba97_K[75][73]=[0,'き','キ'];imba97_K[75][85]=[0,'く','ク'];imba97_K[75][69]=[0,'け','ケ'];imba97_K[75][79]=[0,'こ','コ'];imba97_K[83][65]=[0,'さ','サ'];imba97_K[83][73]=[0,'し','シ'];imba97_K[83][85]=[0,'す','ス'];imba97_K[83][69]=[0,'せ','セ'];imba97_K[83][79]=[0,'そ','ソ'];imba97_K[84][65]=[0,'た','タ'];imba97_K[84][73]=[0,'ち','チ'];imba97_K[84][85]=[0,'つ','ツ'];imba97_K[84][69]=[0,'て','テ'];imba97_K[84][79]=[0,'と','ト'];imba97_K[78][65]=[0,'な','ナ'];imba97_K[78][73]=[0,'に','ニ'];imba97_K[78][85]=[0,'ぬ','ヌ'];imba97_K[78][69]=[0,'ね','ネ'];imba97_K[78][79]=[0,'の','ノ'];imba97_K[72][65]=[0,'は','ハ'];imba97_K[72][73]=[0,'ひ','ヒ'];imba97_K[72][85]=[0,'ふ','フ'];imba97_K[72][69]=[0,'へ','ヘ'];imba97_K[72][79]=[0,'ほ','ホ'];imba97_K[77][65]=[0,'ま','マ'];imba97_K[77][73]=[0,'み','ミ'];imba97_K[77][85]=[0,'む','ム'];imba97_K[77][69]=[0,'め','メ'];imba97_K[77][79]=[0,'も','モ'];imba97_K[89][65]=[0,'や','ヤ'];imba97_K[89][85]=[0,'ゆ','ユ'];imba97_K[89][79]=[0,'よ','ヨ'];imba97_K[82][65]=[0,'ら','ラ'];imba97_K[82][73]=[0,'り','リ'];imba97_K[82][85]=[0,'る','ル'];imba97_K[82][69]=[0,'れ','レ'];imba97_K[82][79]=[0,'ろ','ロ'];imba97_K[87][65]=[0,'わ','ワ'];imba97_K[87][79]=[0,'を','ヲ'];imba97_K[78][78]=[0,'ん','ン'];imba97_K[71]=[1,'g'];imba97_K[71][65]=[0,'が','ガ'];imba97_K[71][73]=[0,'ぎ','ギ'];imba97_K[71][85]=[0,'ぐ','グ'];imba97_K[71][69]=[0,'げ','ゲ'];imba97_K[71][79]=[0,'ご','ゴ'];imba97_K[90]=[1,'z'];imba97_K[90][65]=[0,'ざ','ザ'];imba97_K[90][73]=[0,'じ','ジ'];imba97_K[90][85]=[0,'ず','ズ'];imba97_K[90][69]=[0,'ぜ','ゼ'];imba97_K[90][79]=[0,'ぞ','ゾ'];imba97_K[68]=[1,'d'];imba97_K[68][65]=[0,'だ','ダ'];imba97_K[68][73]=[0,'ぢ','ヂ'];imba97_K[68][85]=[0,'づ','ヂ'];imba97_K[68][69]=[0,'で','デ'];imba97_K[68][79]=[0,'ど','ド'];imba97_K[66]=[1,'b'];imba97_K[66][65]=[0,'ば','バ'];imba97_K[66][73]=[0,'び','ビ'];imba97_K[66][85]=[0,'ぶ','ブ'];imba97_K[66][69]=[0,'べ','ベ'];imba97_K[66][79]=[0,'ぼ','ボ'];imba97_K[80]=[1,'p'];imba97_K[80][65]=[0,'ぱ','パ'];imba97_K[80][73]=[0,'ぴ','ピ'];imba97_K[80][85]=[0,'ぷ','プ'];imba97_K[80][69]=[0,'ぺ','ペ'];imba97_K[80][79]=[0,'ぽ','ポ'];imba97_K[75][89]=[1,'y'];imba97_K[71][89]=[1,'y'];imba97_K[83][89]=[1,'y'];imba97_K[74][89]=[1,'y'];imba97_K[67][89]=[1,'y'];imba97_K[68][89]=[1,'y'];imba97_K[78][89]=[1,'y'];imba97_K[72][89]=[1,'y'];imba97_K[66][89]=[1,'y'];imba97_K[80][89]=[1,'y'];imba97_K[77][89]=[1,'y'];imba97_K[82][89]=[1,'y'];imba97_K[70][89]=[1,'y'];imba97_K[75][89][65]=[0,'きゃ','キャ'];imba97_K[75][89][85]=[0,'きゅ','キュ'];imba97_K[75][89][79]=[0,'きょ','キョ'];imba97_K[71][89][65]=[0,'ぎゃ','ギャ'];imba97_K[71][89][85]=[0,'ぎゅ','ギュ'];imba97_K[71][89][79]=[0,'ぎょ','ギョ'];imba97_K[83][89][65]=[0,'しゃ','シャ'];imba97_K[83][89][85]=[0,'しゅ','シュ'];imba97_K[83][89][79]=[0,'しょ','ショ'];imba97_K[74][89][65]=[0,'じゃ','ジャ'];imba97_K[74][89][85]=[0,'じゅ','ジュ'];imba97_K[74][89][79]=[0,'じょ','ジョ'];imba97_K[67][89][65]=[0,'ちゃ','チャ'];imba97_K[67][89][85]=[0,'ちゅ','チュ'];imba97_K[67][89][79]=[0,'ちょ','チョ'];imba97_K[68][89][65]=[0,'ぢゃ','ヂャ'];imba97_K[68][89][85]=[0,'ぢゅ','ヂュ'];imba97_K[68][89][79]=[0,'ぢょ','ヂョ'];imba97_K[78][89][65]=[0,'にゃ','ニャ'];imba97_K[78][89][85]=[0,'にゅ','ニュ'];imba97_K[78][89][79]=[0,'にょ','ニョ'];imba97_K[72][89][65]=[0,'ひゃ','ヒャ'];imba97_K[72][89][85]=[0,'ひゅ','ヒュ'];imba97_K[72][89][79]=[0,'ひょ','ヒョ'];imba97_K[66][89][65]=[0,'びゃ','ビャ'];imba97_K[66][89][85]=[0,'びゅ','ビュ'];imba97_K[66][89][79]=[0,'びょ','ビョ'];imba97_K[80][89][65]=[0,'ぴゃ','ピャ'];imba97_K[80][89][85]=[0,'ぴゅ','ピュ'];imba97_K[80][89][79]=[0,'ぴょ','ピョ'];imba97_K[77][89][65]=[0,'みゃ','ミャ'];imba97_K[77][89][85]=[0,'みゅ','ミュ'];imba97_K[77][89][79]=[0,'みょ','ミョ'];imba97_K[82][89][65]=[0,'りゃ','リャ'];imba97_K[82][89][85]=[0,'りゅ','リュ'];imba97_K[82][89][79]=[0,'りょ','リョ'];imba97_K[70][85]=[0,'ふ','フ'];imba97_K[74][73]=[0,'じ','ジ'];imba97_K[84][83]=[1,'s'];imba97_K[84][83][85]=[0,'つ','ツ'];imba97_K[67][72][73]=[0,'ち','チ'];imba97_K[83][72][73]=[0,'し','シ'];imba97_K[86]=[1,'v'];imba97_K[86][65]=[0,'ゔぁ','ヴァ'];imba97_K[86][73]=[0,'ゔぃ','ヴィ'];imba97_K[86][85]=[0,'ゔ','ヴ'];imba97_K[86][69]=[0,'ゔぇ','ヴェ'];imba97_K[86][79]=[0,'ゔぉ','ヴォ'];imba97_K[70][65]=[0,'ふぁ','ファ'];imba97_K[70][73]=[0,'ふぃ','フィ'];imba97_K[70][89][85]=[0,'ふゅ','フュ'];imba97_K[70][69]=[0,'ふぇ','フェ'];imba97_K[70][79]=[0,'ふぉ','フォ'];imba97_K[84][83][69]=[0,'つぇ','ツェ'];imba97_K[67][72][69]=[0,'ちぇ','チェ'];imba97_K[83][72][69]=[0,'しぇ','シェ'];imba97_K[74][69]=[0,'じぇ','ジェ'];imba97_K[89][69]=[0,'いぇ','イェ'];imba97_K[81][87][65]=[0,'くぁ','クァ'];imba97_K[75][87][65]=[0,'くぁ','クァ'];imba97_K[81][87][79]=[0,'くぉ','クォ'];imba97_K[75][87][79]=[0,'くぉ','クォ'];imba97_K[87][73]=[0,'うぃ','ウィ'];imba97_K[87][69]=[0,'うぇ','ウェ'];imba97_K[76][65]=[0,'ぁ','ァ'];imba97_K[76][73]=[0,'ぃ','ィ'];imba97_K[76][85]=[0,'ぅ','ゥ'];imba97_K[76][69]=[0,'ぇ','ェ'];imba97_K[76][79]=[0,'ぉ','ォ'];imba97_K[189]=[0,'ー','ー'];imba97_jq(':text,textarea').focus(function(){if(!imba97_ON)return;imba97_F=imba97_jq(this);imba97_F.blur();var position=imba97_F.offset();if(imba97_jq('#imba97_keyboard_window').length<=0){imba97_jq('body').append('<div style=\'position:absolute;top:0;z-index:999999\' id=\'imba97_keyboard_window\'><ul style=\'position:absolute;right:30px;top:30px;list-style:none\' id=\'imba97_btn\'><li id=\'imba97_close\'><span>%E5%85%B3%E9%97%AD</span></li><li id=\'imba97_cu\'><span>%E5%B9%B3%E5%81%87</span></li></ul><span id=\'imba97_posi\' style=\'position:absolute;width:500px;\'><span style=\'position:absolute;padding:3px;min-width:50px\' id=\'imba97_span\'><div class=\'imba97_bg\'></div><span style=\'color:#FFF\' id=\'imba97_text\'></span><span style=\'text-decoration:underline;color:#FFF\' id=\'imba97_underline\'></span><span id=\'imba97_cursor\' style=\'color:#FFF\'>|</span></span></span></div>');imba97_W=imba97_jq('#imba97_keyboard_window');imba97_TEXT=imba97_W.find('#imba97_text');imba97_UN=imba97_W.find('#imba97_underline');imba97_BTN=imba97_W.find('#imba97_btn');imba97_W.css({'margin':0,'padding':0});imba97_W.find('#imba97_btn,#imba97_btn li').css({'margin':0,'padding':0});imba97_W.find('*').css({'text-align':'left'});imba97_F.bind('blur',function(){if(imba97_W.length>0)return;imba97_jq(this).unbind('blur');imba97_F=null});imba97_W.find('#imba97_span').bind('dblclick',function(){imba97_close()});imba97_BTN.find('#imba97_close').bind('click',function(){imba97_close()});imba97_BTN.find('#imba97_cu').bind('click',function(){imba97_cu()});imba97_BTN.find('li').css({'position':'relative','margin-top':5,'width':30,'height':30,'cursor':'pointer','font-size':12,'color':'#FFF','line-height':'30px','text-align':'center','border-radius':7}).append('<div class=\'imba97_bg\'></div>');imba97_W.find('.imba97_bg').css({'position':'absolute','top':0,'left':0,'width':'100%','height':'100%','background-color':'#000','opacity':'0.75','border-radius':'5px','z-index':'-9999'});imba97_fade(imba97_W.find('#imba97_cursor'))}var e_top=position.top+imba97_F.outerHeight()+10;var e_left=position.left;var f_top=e_top>30?e_top:30;var f_left=e_left>50?e_left:50;var btn_top=f_top-5>0?(f_top-5):0;var btn_left=f_left-40>0?(f_left-40):0;imba97_W.find('#imba97_posi').css({'top':f_top,'left':f_left}).show();imba97_BTN.css({'top':btn_top,'left':btn_left})});imba97_jq(document).keydown(function(e){if(!imba97_ON)return;if(imba97_F==null||imba97_F==undefined)return;imba97_F.blur();var key=e.which;var s=imba97_TEXT.text();var us=imba97_UN.text();var fs=imba97_F.val();if(key==16){imba97_cu();return}if(key==8&&(s.length!=0||us.length!=0)){e.preventDefault();if(imba97_UN.text()!=''){var n=us.substring(0,us.length-1);imba97_UN.text(n);imba97_UT=n;imba97_S[imba97_N];imba97_N--}else{var n=s.substring(0,s.length-1);imba97_TEXT.text(n)};return}if(key==13){e.preventDefault();imba97_F.val(fs+s);imba97_jq('#imba97_text').text('');imba97_clear();return}if(key>64&&key<91||key==189){e.preventDefault();if(imba97_K[key]==undefined)return;if(imba97_K[key][0]){if(imba97_UN.text()!=''){switch(imba97_N){case 1:if(key==imba97_S[0]&&key!=78&&key!=189){var tsu=imba97_T==1?'%E3%81%A3':'%E3%83%83';imba97_TEXT.text(s+tsu);return}if(imba97_K[imba97_S[0]][key]!=undefined){imba97_S[1]=key;if(imba97_K[imba97_S[0]][key][0]){imba97_UT+=imba97_K[imba97_S[0]][key][1];imba97_UN.text(imba97_UT);imba97_N++;return}else{imba97_TEXT.text(s+imba97_K[imba97_S[0]][key][imba97_T]);imba97_clear();return}}else{return}break;case 2:if(imba97_K[imba97_S[0]][imba97_S[1]]==undefined||imba97_K[imba97_S[0]][imba97_S[1]][key]!=undefined){if(imba97_K[imba97_S[0]][imba97_S[1]][key][0]){imba97_N++;return}else{imba97_TEXT.text(s+imba97_K[imba97_S[0]][imba97_S[1]][key][imba97_T]);imba97_clear();return}}else{return}break}}else{if(imba97_K[key]!=undefined)imba97_S[imba97_N]=key;else return;imba97_UT+=imba97_K[key][1];imba97_UN.text(imba97_UT);imba97_N++;return}}else{switch(imba97_N){case 1:if(imba97_K[imba97_S[0]][key]==undefined)return;imba97_TEXT.text(s+imba97_K[imba97_S[0]][key][imba97_T]);imba97_clear();return;break;case 2:if(imba97_K[imba97_S[0]][imba97_S[1]][key]==undefined)return;imba97_TEXT.text(s+imba97_K[imba97_S[0]][imba97_S[1]][key][imba97_T]);imba97_clear();return;break}}if(imba97_K[key][imba97_T]!=undefined)imba97_jq('#imba97_text').text(s+imba97_K[key][imba97_T])}});imba97_jq.post('http://data.imba97.cn/Index/jpInputUpdate',{'version':imba97_VERSION},function(imba97_json){if(imba97_json.version!==null&&imba97_json.version!==undefined){if(imba97_json.version!==imba97_VERSION){var info='%E5%8F%91%E7%8E%B0%E6%96%B0%E7%89%88%E6%9C%AC v'+imba97_json.version+' \n\n'+imba97_json.info;if(window.confirm(info)){window.location.href='http://g.imba97.cn/jpinput/'}}}});function imba97_fade(doc){doc.animate({'opacity':0},500,function(){imba97_jq(this).animate({'opacity':1},500,function(){imba97_fade(imba97_jq(this))})})}function imba97_close(){if(imba97_ON){imba97_jq('#imba97_span').fadeOut();imba97_BTN.find('#imba97_close span').html('%E5%BC%80%E5%90%AF');imba97_ON=false}else{imba97_jq('#imba97_span').fadeIn();imba97_BTN.find('#imba97_close span').html('%E5%85%B3%E9%97%AD');imba97_ON=true}imba97_clear(true)}function imba97_cu(){if(imba97_T==1){imba97_BTN.find('#imba97_cu span').html('%E7%89%87%E5%81%87');imba97_T=2}else{imba97_BTN.find('#imba97_cu span').html('%E5%B9%B3%E5%81%87');imba97_T=1}}function imba97_clear(k){if(k){imba97_TEXT.text('')}imba97_N=imba97_S[0]=imba97_S[1]=imba97_S[2]=0;imba97_UT='';imba97_UN.text('')}}}else{alert('%E6%9C%AA%E5%8F%91%E7%8E%B0jQuery%EF%BC%8C%E4%BB%A5%E8%87%AA%E5%8A%A8%E5%8A%A0%E8%BD%BD%EF%BC%8C%E8%AF%B7%E5%86%8D%E6%AC%A1%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE');var imba97_j=document.createElement('script');imba97_j.type='text/javascript';imba97_j.src='https://code.jquery.com/jquery-3.1.1.min.js';document.getElementsByTagName('head')[0].appendChild(imba97_j);}return;}imba97_jpinput()
